@model OATools.Models.TimedBitchLetter

@{
    ViewBag.Title = "B*tch Letter";
}

<div>
    @* Add a countdown timer for God's response. *@
    <button id="start" class="btn btn-primary" style="padding-top: 10px;" onclick="startTime()">Start Time</button>
    <button id="stop" class="btn btn-primary" style="padding-top: 10px;" onclick="stopTime()">Stop Time</button>
    <div id="startTime"></div>
    <div id="stopTime"></div>
    <div style="padding-top: 10px;">

        @using (Html.BeginForm("BitchLetter", "Toolkit"))
        {
            <div class="form-group">
                @Html.LabelFor(m => m.Subject)
                @Html.TextBoxFor(m => m.Subject)
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Bitching)
                @Html.TextAreaFor(m => m.Bitching)
                @Html.ValidationMessageFor(m => m.Bitching, "", new { @style = "color:red" })
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.GodsResponse)
                @Html.TextAreaFor(m => m.GodsResponse)
            </div>

            @*<button class="btn btn-primary" type="submit">Submit</button>*@
        }
    </div>
</div>


@section scripts{
    @Scripts.Render("~/bundles/jqueryval")

    <script>
        const startButton = document.getElementById('start');
        const stopButton = document.getElementById('stop');

        let addZero = num => {
            return num < 10 ? "0" + num : num;
        }

        let GetTime = () => {
            let time = new Date();

            var h = time.getHours();
            var m = addZero(time.getMinutes());
            var s = addZero(time.getSeconds());

            return h + ":" + m + ":" + s;
        }

        let startTime = () => {
            document.getElementById('startTime').innerHTML = GetTime();
 
            startButton.disabled = true;
            stopButton.disabled = false;
        }

        let stopTime = () => {
            document.getElementById('stopTime').innerHTML = GetTime();

            stopButton.disabled = true;
            startButton.disabled = false;
        }
    </script>
}